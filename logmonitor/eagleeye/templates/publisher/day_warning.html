{% extends "publisher/index.html" %}
{% block content %}
<div class="top-div">
    <div class="search-box">
        <div class="search">
            <input type="text" id="beginDate" class="datepicker" value="{{ beginDate }}" readonly="true" name="beginDate"/>
        </div>
        <div class="search submit">
            <input type="image" src="/static/images/btn_submit.png" id="submit"/>
        </div>
    </div>
    <div class="clear"></div>
</div>
<script type="text/javascript">
function resizeChartHeight(chart) {
    $.get("/publisher/daywarning/chartheight/",
            {"beginDate": $('#beginDate').val()},
            function(data) {
                chart.height = data;
                chart.resizeTo();
            }
    );
}
</script>
<div class="middle-div">
    <div id="charts">
        <div id="chart-daywarning"></div>
        <script type="text/javascript">
            FusionCharts._fallbackJSChartWhenNoFlash();
            var chart = new FusionCharts("/static/swf/MSBar2D.swf",
            "cdw", "100%", "520", "0", "1");
            resizeChartHeight(chart);
            var url = "/publisher/daywarning/detail/";
            url += "?beginDate={{beginDate}}";
            chart.setJSONUrl(url);
            chart.render("chart-daywarning");
        </script>
    </div>
</div>
<div class="clear"></div>
<script type="text/javascript">
$(document).ready(function() {
    $('.datepicker').datepicker();
    $('#submit').click(function() {
        var day = $('#beginDate').val();
        FusionCharts._fallbackJSChartWhenNoFlash();
        var chart = new FusionCharts("/static/swf/MSBar2D.swf",
        "cdw", "100%", "520", "0", "1");
        resizeChartHeight(chart);
        var url = "/publisher/daywarning/detail/";
        url += "?beginDate="+day;
        chart.setJSONUrl(url);
        chart.render("chart-daywarning");
    });
});
</script>
{% endblock %}